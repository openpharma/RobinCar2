# RobinCar2

RobinCar2 is a package that provides robust covariate adjustment methods
for estimating and inferring treatment effects under stratified
randomization. The implemented methods follow the [FDA’s final guidance
on covariate
adjustment](https://www.regulations.gov/docket/FDA-2019-D-0934) and are
supported by a well-established body of literature. For linear
adjustment, see, for example, [Tsiatis
(2008)](https://pubmed.ncbi.nlm.nih.gov/17960577/), [Bugni et
al. (2018)](https://pubmed.ncbi.nlm.nih.gov/30906087/), [Ye, Shao, Yi,
and Zhao (2023)](https://doi.org/10.1080/01621459.2022.2049278), and
[Ye, Shao, and Yi (2022)](https://doi.org/10.1093/biomet/asab015). For
nonlinear adjustment, see, e.g., [Rosenblum and van der Laan
(2010)](https://www.degruyter.com/document/doi/10.2202/1557-4679.1138/html?lang=en&srsltid=AfmBOoo_ikKbaLeBYcxie-99GCMnZfRNzf6aGn8Uxxnw0X3boYtm69U0),
[Wang et al. (2021)](https://doi.org/10.1080/01621459.2021.1981338),
[Ye, Bannick, Yi, and Shao
(2023)](https://doi.org/10.1080/24754269.2023.2205802), and [Bannick,
Shao, Liu, Du, Yi, and Ye (2024)](https://arxiv.org/abs/2306.10213).

All the following papers (added above) are cited in the FDA guidance.

- Bugni, F, IA Canay, and AM Shaikh, 2018, Inference Under
  Covariate-Adaptive Randomization, Journal of the American Statistical
  Association, 113(524):1784-1796.

- Tsiatis, AA, M Davidian, M Zhang, and X Lu, 2008, Covariate Adjustment
  for Two-Sample Treatment Comparisons in Randomized Trials: A
  Principled Yet Flexible Approach, Statistics in Medicine,
  27(23):4658-4677.

- Wang, B, R Susukida, R Mojtabai, M Amin-Esmaeili, and M
  Rosemblum, 2021. Model-Robust Inference for Clinical Trials that
  Improve Precision by Stratified Randomization and Covariate
  Adjustment, Journal of the American Statistical Association, doi:
  10.1080/01621459.2021.1981338.

- Rosenblum, M and MJ van der Laan, 2010, Simple, Efficient Estimators
  of Treatment Effects in Randomized Trials Using Generalized Linear
  Models to Leverage Baseline Variables, International Journal of
  Biostatistics, 6(1):13.

## Installation

### Development

You can install the current development version from `github` with:

``` r

if (!require("remotes")) {
  install.packages("remotes")
}

remotes::install_github(
  "openpharma/RobinCar2"
)
```

## Citing `RobinCar2`

To cite `RobinCar2` please see
[here](https://openpharma.github.io/RobinCar2/main/authors.html#citation).

## Acknowledgement

This package is supported by [ASA-BIOP Covariate Adjustment SWG Software
Subteam](https://carswg.github.io/subteam_software.html).

# Package index

## Package

- [`RobinCar2`](https://openpharma.github.io/RobinCar2/reference/RobinCar2-package.md)
  [`RobinCar2-package`](https://openpharma.github.io/RobinCar2/reference/RobinCar2-package.md)
  :

  `RobinCar2` Package

## Main Function

- [`robin_lm()`](https://openpharma.github.io/RobinCar2/reference/robin_lm.md)
  : Covariate adjusted lm model
- [`robin_glm()`](https://openpharma.github.io/RobinCar2/reference/robin_glm.md)
  : Covariate adjusted glm model
- [`robin_surv()`](https://openpharma.github.io/RobinCar2/reference/robin_surv.md)
  : Covariate Adjusted and Stratified Survival Analysis

## Counter Factual Predictions

- [`predict_counterfactual()`](https://openpharma.github.io/RobinCar2/reference/predict_counterfactual.md)
  : Counterfactual Prediction

## Contrasts

- [`h_diff()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_diff()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_log_risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_log_risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_log_odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_log_odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`eff_jacob()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`pairwise()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`against_ref()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`custom_contrast()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  : Contrast Functions and Jacobians

## Jacobian of Contrasts

- [`h_diff()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_diff()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_log_risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_log_risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_log_odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`h_jac_log_odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`eff_jacob()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`pairwise()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`against_ref()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  [`custom_contrast()`](https://openpharma.github.io/RobinCar2/reference/contrast.md)
  : Contrast Functions and Jacobians

## Treatment Effects

- [`treatment_effect()`](https://openpharma.github.io/RobinCar2/reference/treatment_effect.md)
  [`difference()`](https://openpharma.github.io/RobinCar2/reference/treatment_effect.md)
  [`risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/treatment_effect.md)
  [`odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/treatment_effect.md)
  [`log_risk_ratio()`](https://openpharma.github.io/RobinCar2/reference/treatment_effect.md)
  [`log_odds_ratio()`](https://openpharma.github.io/RobinCar2/reference/treatment_effect.md)
  : Treatment Effect

- [`print(`*`<surv_effect>`*`)`](https://openpharma.github.io/RobinCar2/reference/surv_effect_methods.md)
  [`table()`](https://openpharma.github.io/RobinCar2/reference/surv_effect_methods.md)
  :

  S3 Methods for `surv_effect`

## Robust Variance

- [`vcovG()`](https://openpharma.github.io/RobinCar2/reference/vcovG.md)
  : Generalized Covariance (ANHECOVA)
- [`vcovHC()`](https://openpharma.github.io/RobinCar2/reference/vcovHC.md)
  : Heteroskedasticity-consistent covariance matrix for predictions

## Dummy Data

- [`glm_data`](https://openpharma.github.io/RobinCar2/reference/glm_data.md)
  : Example Trial Data for GLMs with Permute-Block Randomization
- [`surv_data`](https://openpharma.github.io/RobinCar2/reference/surv_data.md)
  : Survival Example Data

## Utilities

- [`find_data()`](https://openpharma.github.io/RobinCar2/reference/find_data.md)
  : Find Data in a Fit
- [`confint(`*`<prediction_cf>`*`)`](https://openpharma.github.io/RobinCar2/reference/confint.md)
  [`confint(`*`<surv_effect>`*`)`](https://openpharma.github.io/RobinCar2/reference/confint.md)
  [`confint(`*`<treatment_effect>`*`)`](https://openpharma.github.io/RobinCar2/reference/confint.md)
  : Confidence Interval

# Articles

### All vignettes

- [Package
  Introduction](https://openpharma.github.io/RobinCar2/articles/intro.md):
- [Generalized Linear Regression in RobinCar and
  RobinCar2](https://openpharma.github.io/RobinCar2/articles/robincar-comparison.md):
- [Survival Analysis with
  RobinCar2](https://openpharma.github.io/RobinCar2/articles/robincar-survival.md):
- [RobinCar2 Validation
  Report](https://openpharma.github.io/RobinCar2/articles/robincar-validate.md):
